## Design

### Parties

* Mobile App (MA) -- app that receives notifications
* Apple Push Notification service (APNs) -- a server controlled by Apple (`gateway.push.apple.com`) that delivers notifications to devices
* Notification Provider (NP) -- an application that sends notifications to instances of Mobile App
* Feedback Service (FS) -- a service associated with APNs that provides status of past deliveries

### Subscription and notifications

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

MA            APNs               NP
 |--register-->|                 |
 |<----DTKN----|                 |
 |--------subscibe(DTKN)-------->|
 .             .                 .
 .             .                 .
 .             .                 .
 |             |<--notify(DTKN)--|
 |<---notify---|                 |

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

### Device Token

Token used by the notification provider is requested by Mobile App, generated by APNs and then passed by Mobile App on to the Notification Provider. Notification Provider must use it whenever it wants to notify that particular instance of Mobile App.

### Protocol

Described in [Provider Communication][PC] doc on Apple website.

The stack:

TLS/SSL
TCP

binary

### Feedback

TODO

## Third-party providers

* [push.io](http://push.io/)

## Resources

### Apple

* [technical note](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)
* [provider communication][PC]

### JavaPNS

* [general requirements](http://code.google.com/p/javapns/wiki/GeneralRequirements)

[PC]: http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html
